\ProvidesPackage{lb_base}[30/03/2021]

% Packages which I almost always find useful
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{mathtools}
\RequirePackage{bm}
\RequirePackage{commath}
\RequirePackage{enumitem}

\RequirePackage{xparse, xargs}

\RequirePackage{color, xcolor}

%% OPTIONS %%

% Option for serif font
\DeclareOption{sans}{\renewcommand{\familydefault}{\sfdefault}}
\ProcessOptions\relax


% Provides warnings if labels are unused
\RequirePackage{refcheck}
\norefnames
\nocitenames


% Allow numbering of individuals lines in an align env
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}


% Numeric sets
\newcommand{\R}{\mathbb{R}}		% Real numbers
\newcommand{\Z}{\mathbb{Z}}		% Integers
\newcommand{\N}{\mathbb{N}}		% Natural numbers
\newcommand{\Q}{\mathbb{Q}}		% Rational numbers
\newcommand{\C}{\mathbb{C}}		% Complex numbers


% Bracketed fractions
\newcommand{\bfrac}[2]{\left(\frac{#1}{#2}\right)}

% Smaller dot operator for dot product, etc.
\makeatletter
\newcommand*\dotp{\mathpalette\dotp@{.5}}
\newcommand*\dotp@[2]{\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

% Vector calculus operators
\newcommand{\vder}{\nabla}					% Gradient
\newcommand{\vdiv}{\vder \dotp}			% Divergence
\newcommand{\curl}{\vder \times}    % Curl

% Vector integrals


% Provide reasoning in a \text env alongside a line of maths
\newcommand{\rea}[1]{\qquad \qquad \left(\text{#1}\right)}

% argmax and argmin
\DeclareMathOperator{\argmax}{argmax}
\DeclareMathOperator{\argmin}{argmin}

% Transpose operator with \T
\newcommand{\T}{^{\intercal}}

% Enumerate environment with alphabetic labels
\newenvironment{alpharate}{
	\begin{enumerate}[label=\alph*)]
		}{
	\end{enumerate}
}

% Todo notes, annotations, etc.
% Thanks JM
\RequirePackage[colorinlistoftodos,prependcaption,textsize=scriptsize]{todonotes}

\newcommandx{\note}[2][1=]{
	\todo[inline,linecolor=black,backgroundcolor=violet!5,bordercolor=violet,#1]{
		NOTE: #2
	}
}
\newcommandx{\td}[2][1=]{
	\todo[inline,linecolor=orange,backgroundcolor=orange!5,bordercolor=orange,#1]{
		TODO: #2
	}
}
\newcommandx{\lb}[2][1=]{
	\todo[linecolor=teal,backgroundcolor=teal!5,bordercolor=teal,#1]{
		#2
	}
}


% Neat trick to access environment variables
% From https://tex.stackexchange.com/a/62032

\ExplSyntaxOn
\NewDocumentCommand{\getenv}{om}
{
	\sys_get_shell:nnN { kpsewhich ~ --var-value ~ #2 } { } \l_tmpa_tl
	\tl_trim_spaces:N \l_tmpa_tl
	\IfNoValueTF { #1 }
	{
		\tl_use:N \l_tmpa_tl
	}
	{
		\tl_set_eq:NN #1 \l_tmpa_tl
	}
}
\ExplSyntaxOff
